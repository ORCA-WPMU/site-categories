/*! Site Categories - v1.0.91
 * https://premium.wpmudev.org/project/site-categories/
 * Copyright (c) 2016; * Licensed GPLv2+ */
function UrlExists(a){var b=new XMLHttpRequest;return b.open("HEAD",a,!1),b.send(),404!=b.status}function getUrlParams(a){a||(a=window.location.search);var b={},c=(a.split("?")[1]||"").split("&");for(var d in c)c.hasOwnProperty(d)&&(paramParts=c[d].split("="),b[paramParts[0]]=decodeURIComponent(paramParts[1]||""));return b}!function(a){uploadOptionBCAT={init:function(){var b,c="",d="",e="";a("input#bcat_image_upload").on("click",function(f){if("thickbox"==site_categories_data.image_view)e||(e=getUrlParams()),e.post&&(c=e.post),d=a(this).attr("rel"),dest_field_src="bcat_image_src",tb_show("","media-upload.php?type=image&amp;post_id=0&amp;TB_iframe=1&amp;width=640&amp;height=698"),b=setInterval(function(){jQuery("#TB_iframeContent").contents().find(".savesend .button").val("Use this image")},2e3);else if("new_media"==site_categories_data.image_view){var g;f.preventDefault(),g=wp.media.frames.file_frame=wp.media({title:site_categories_data.image_view_title_text,button:{text:site_categories_data.image_view_button_text},multiple:!1}),g.on("select",function(){attachment=g.state().get("selection").first().toJSON(),a("input#bcat_image_id").val(attachment.id);var b="";void 0!=attachment.sizes.full&&void 0==attachment.sizes.thumbnail&&(attachment.sizes.thumbnail=attachment.sizes.full),b=attachment.sizes.thumbnail.url,b.length>0&&(a("img#bcat_image_src").attr("src",b),a("img#bcat_image_src").show(),a("input#bcat_image_upload").hide(),a("input#bcat_image_remove").show())}),g.open()}return!1}),a("input#bcat_image_remove").on("click",function(){a("input#bcat_image_upload").show(),a("input#bcat_image_remove").hide(),a("input#bcat_image_id").val("");var b=a("img#bcat_image_src").attr("rel");return a("img#bcat_image_src").attr("src",b),!1}),window.original_send_to_editor=window.send_to_editor,window.send_to_editor=function(c){var d=/(^.*\.jpg|jpeg|png|gif|ico*)/gi;clearInterval(b),itemurl=a(c).attr("href");var e=a(c).find("img").attr("class").split(/\s+/);if(e)for(var f="",g=0;g<e.length;g++){var h=e[g];if(!(h.length<9)&&"wp-image-"==h.substring(0,9)){f=h.substring(9,h.length),a("input#bcat_image_id").val(f);break}}UrlExists(itemurl)&&itemurl.match(d)&&(a("img#bcat_image_src").attr("src",itemurl),a("img#bcat_image_src").show(),a("input#bcat_image_upload").hide(),a("input#bcat_image_remove").show()),tb_remove()}}},a(document).ready(function(){uploadOptionBCAT.init(),a("select#site-categories-show-style").change(function(){"grid"==a(this).val()?(a(".site-categories-non-grid-options").hide(),a(".site-categories-accordion-options").hide(),a(".site-categories-grid-options").show()):"accordion"==a(this).val()?(a(".site-categories-non-accordion-options").hide(),a(".site-categories-grid-options").hide(),a(".site-categories-accordion-options").show()):"select-flat"==a(this).val()||"select-nested"==a(this).val()?a(".site-categories-non-select-options").hide():(a(".site-categories-grid-options").hide(),a(".site-categories-accordion-options").hide(),a(".site-categories-non-grid-options").show(),a(".site-categories-non-select-options").show())})})}(jQuery);